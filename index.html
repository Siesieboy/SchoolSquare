<!DOCTYPE html>
<html lang="nl" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="siesieboy.github.io/SchoolSquare/SchoolSquareFavicon.png">
<title>SchoolSquare</title>

<style>
/* ================= THEME ================= */
html[data-theme="light"] {
  --bg: #f4f7fb;
  --panel: #ffffff;
  --card: rgba(255, 255, 255, 0.9);
  --accent: #1e88ff;
  --accent-soft: rgba(30,136,255,0.12);
  --text: #0f172a;
  --muted: #64748b;
  --border: rgba(15,23,42,0.1);
  --success: #22c55e;
  --error: #ef4444;
}

html[data-theme="dark"] {
  --bg: #0b0f1a;
  --panel: #111827;
  --card: rgba(17, 24, 39, 0.9);
  --accent: #4ea1ff;
  --accent-soft: rgba(78,161,255,0.18);
  --text: #e5e7eb;
  --muted: #9ca3af;
  --border: rgba(255,255,255,0.1);
  --success: #22c55e;
  --error: #f87171;
}

/* ================= GLOBAL ================= */
* { box-sizing: border-box; }
body { margin: 0; font-family: 'Inter', system-ui, sans-serif; background: var(--bg); color: var(--text); transition: background 0.4s; }
.app { max-width: 1300px; margin: auto; padding: 25px; }

/* ================= HERO (GECENTREERD) ================= */
.hero {
  background: linear-gradient(135deg, var(--accent), #5bb2ff);
  border-radius: 26px;
  padding: 30px 40px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: white;
  box-shadow: 0 15px 35px rgba(0,0,0,0.1);
}
.hero-right { display: flex; flex-direction: column; align-items: center; text-align: center; gap: 8px; }
.clock-time { font-size: 48px; font-weight: 800; line-height: 1; }
.theme-btn { 
  margin-top: 5px; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); 
  color: white; padding: 8px 20px; border-radius: 20px; cursor: pointer; backdrop-filter: blur(10px); 
}

/* ================= NAV ================= */
.nav { display: flex; gap: 12px; margin: 30px 0; flex-wrap: wrap; }
.nav button { 
  background: var(--panel); border: 1px solid var(--border); padding: 14px 22px; 
  border-radius: 15px; cursor: pointer; color: var(--text); font-weight: 600; transition: 0.2s;
}
.nav button.active { background: var(--accent); color: white; border-color: var(--accent); }

.section { display: none; }
.section.active { display: block; }

/* ================= CARDS & INPUTS ================= */
.card { background: var(--panel); border-radius: 22px; padding: 25px; border: 1px solid var(--border); margin-bottom: 25px; }
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px; }
.stat-card { background: var(--panel); border-radius: 20px; padding: 20px; text-align: center; border: 1px solid var(--border); }
.stat-card h2 { margin: 0; color: var(--accent); font-size: 32px; }

input, textarea { 
  width: 100%; background: var(--panel) !important; color: var(--text) !important; 
  border: 1px solid var(--border); padding: 15px; border-radius: 12px; margin-bottom: 12px; outline: none; font-size: 16px;
}
.btn-primary { background: var(--accent); color: white; border: none; padding: 16px; border-radius: 14px; font-weight: 700; cursor: pointer; width: 100%; font-size: 16px; }

/* ================= TOETSEN & GRID ================= */
.grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
.toets-card { 
  background: var(--panel); border-radius: 20px; padding: 20px; border: 1px solid var(--border); 
  border-left: 6px solid var(--accent); position: relative;
}
.toets-badge { background: var(--accent-soft); color: var(--accent); padding: 4px 10px; border-radius: 8px; font-size: 12px; font-weight: 700; margin-bottom: 10px; display: inline-block; }

/* ================= FLASHCARDS (3D) ================= */
.flashcard-container { perspective: 1000px; height: 160px; cursor: pointer; }
.flashcard-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
.flashcard-container.flipped .flashcard-inner { transform: rotateY(180deg); }
.flashcard-front, .flashcard-back { 
  position: absolute; width: 100%; height: 100%; backface-visibility: hidden; 
  display: flex; align-items: center; justify-content: center; padding: 20px; border-radius: 20px; border: 1px solid var(--border); text-align: center; font-weight: 600;
}
.flashcard-front { background: var(--panel); color: var(--text); }
.flashcard-back { background: var(--accent); color: white; transform: rotateY(180deg); }

.button-group { display: flex; gap: 10px; margin-bottom: 15px; }
.btn-outline { background: var(--panel); border: 1px solid var(--accent); color: var(--accent); flex: 1; padding: 15px; border-radius: 12px; font-weight: 700; cursor: pointer; }

/* ================= ANIMATIES & FEEDBACK ================= */
.success-glow { border-color: var(--success) !important; box-shadow: 0 0 12px rgba(34,197,94,0.3); }
.error-glow { border-color: var(--error) !important; box-shadow: 0 0 12px rgba(239,68,68,0.3); }

@media (max-width: 768px) { .hero { flex-direction: column; text-align: center; gap: 20px; } }
</style>
</head>

<body>
<div class="app">

<div class="hero">
  <div><h1 id="groet" style="margin:0;">Laden...</h1><p style="margin:5px 0 0 0; opacity:0.8;">Focus modus aan üöÄ</p></div>
  <div class="hero-right">
    <div class="clock-time" id="time">00:00</div>
    <div id="date" style="opacity:0.9;">--</div>
    <button id="themeToggle" class="theme-btn">üåô</button>
  </div>
</div>

<div class="nav">
  <button class="active" onclick="show('dashboard',this)">Dashboard</button>
  <button onclick="show('cijfers',this)">Cijfers</button>
  <button onclick="show('overhoren',this)">Overhoren</button>
</div>

<div id="dashboard" class="section active">
  <div class="stats-grid">
    <div class="stat-card"><h2 id="openCount">0</h2><span>Toetsen/opdrachten te gaan</span></div>
    <div class="stat-card"><h2 id="dagenCount">0</h2><span>Dagen tot eerstvolgende toets/opdracht</span></div>
  </div>

  <div class="card" id="toetsForm">
    <h3>üìÖ Nieuwe toets</h3>
    <input id="naam" type="text" placeholder="Welk vak?">
    <input id="datum" type="date">
    <textarea id="notitie" placeholder="Wat moet je precies doen?"></textarea>
    <button class="btn-primary" onclick="addToets()">Toets Toevoegen</button>
  </div>
  <div class="grid" id="toetsenLijst"></div>
</div>

<div id="cijfers" class="section">
  <div class="card">
    <h3>üìä Cijfercalculator</h3>
    <label style="font-size:12px; font-weight:700;">HUIDIG GEMIDDELDE</label>
    <input id="huidig" type="text" inputmode="decimal" placeholder="bijv. 6.5">
    <label style="font-size:12px; font-weight:700;">WEGING NIEUWE TOETS</label>
    <input id="weging" type="text" inputmode="decimal" placeholder="bijv. 2">
    <label style="font-size:12px; font-weight:700;">GEWENST GEMIDDELDE</label>
    <input id="doel" type="text" inputmode="decimal" placeholder="bijv. 7.0">
    <button class="btn-primary" onclick="bereken()">Bereken resultaat</button>
    <div id="resultBox" style="display:none; margin-top:20px; padding:20px; border-radius:15px; background:var(--accent-soft); text-align:center;">
        <h4 id="resultaat" style="margin:0;"></h4>
    </div>
  </div>
</div>

<div id="overhoren" class="section">
  <div class="card">
    <h3>üß† Overhoren</h3>
    <textarea id="leerstof" style="height:120px;" placeholder="Plak je tekst hier..."></textarea>
    <div class="button-group">
        <button class="btn-primary" style="flex:2;" onclick="genereerFlashcards(false)">Vragen genereren</button>
        <button class="btn-outline" onclick="genereerFlashcards(true)">+ Extra toevoegen</button>
        <button onclick="resetFlashcards()" style="background:none; border:1px solid var(--error); color:var(--error); border-radius:12px; padding:10px 15px; cursor:pointer; font-weight:700;">Wissen</button>
    </div>
  </div>
  <div class="grid" id="flashcardsLijst"></div>
</div>

</div>

<script>
let toetsen = JSON.parse(localStorage.getItem("schoolsquare_toetsen")) || [];

/* ================= NAVIGATIE ================= */
function show(id, btn) {
  document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
  document.querySelectorAll(".nav button").forEach(b => b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  btn.classList.add("active");
}

/* ================= TOETSEN LOGIC ================= */
function addToets() {
  const n = document.getElementById("naam"), d = document.getElementById("datum"), nt = document.getElementById("notitie");
  if (!n.value || !d.value) return n.classList.add("error-glow");
  
  toetsen.push({ id: Date.now(), naam: n.value, datum: d.value, notitie: nt.value });
  localStorage.setItem("schoolsquare_toetsen", JSON.stringify(toetsen));
  
  n.value = ""; d.value = ""; nt.value = "";
  n.classList.remove("error-glow");
  renderToetsen();
}

function deleteToets(id) {
  toetsen = toetsen.filter(t => t.id !== id);
  localStorage.setItem("schoolsquare_toetsen", JSON.stringify(toetsen));
  renderToetsen();
}

function renderToetsen() {
  const lijst = document.getElementById("toetsenLijst");
  lijst.innerHTML = "";
  toetsen.sort((a, b) => new Date(a.datum) - new Date(b.datum));

  toetsen.forEach(t => {
    const div = document.createElement("div");
    div.className = "toets-card";
    const dStr = new Date(t.datum).toLocaleDateString("nl-NL", { day: 'numeric', month: 'long' });
    div.innerHTML = `
      <div class="toets-badge">üìÖ ${dStr}</div>
      <h4 style="margin:5px 0;">${t.naam}</h4>
      <p style="font-size:14px; color:var(--muted); margin-bottom:15px;">${t.notitie || 'Geen extra info.'}</p>
      <button onclick="deleteToets(${t.id})" style="background:none; border:none; color:var(--error); cursor:pointer; font-weight:700; font-size:11px; padding:0;">üóëÔ∏è VERWIJDEREN</button>
    `;
    lijst.appendChild(div);
  });
  updateStats();
}

function updateStats() {
  document.getElementById("openCount").textContent = toetsen.length;
  const dCount = document.getElementById("dagenCount");
  if (toetsen.length > 0) {
    const diff = Math.ceil((new Date(toetsen[0].datum) - new Date().setHours(0,0,0,0)) / (1000 * 60 * 60 * 24));
    dCount.textContent = diff < 0 ? 0 : diff;
  } else { dCount.textContent = 0; }
}

/* ================= FLASHCARDS LOGIC ================= */
function resetFlashcards() {
    document.getElementById("flashcardsLijst").innerHTML = "";
    document.getElementById("leerstof").value = "";
}

function genereerFlashcards(append) {
  const tI = document.getElementById("leerstof"), lijst = document.getElementById("flashcardsLijst");
  if (!append) lijst.innerHTML = "";
  if (tI.value.length < 5) return;

  const zinnen = tI.value.split(/[.!?\n]/).filter(z => z.trim().length > 10);
  zinnen.forEach(z => {
      const container = document.createElement("div");
      container.className = "flashcard-container";
      container.onclick = () => container.classList.toggle("flipped");
      container.innerHTML = `
        <div class="flashcard-inner">
            <div class="flashcard-front">‚ùì ${z.trim()}?</div>
            <div class="flashcard-back">‚úÖ Antwoord:<br><small>Context: "${z.trim()}"</small></div>
        </div>`;
      lijst.appendChild(container);
  });
  tI.value = "";
}

/* ================= CALCULATOR ================= */
function bereken() {
  const h = parseFloat(document.getElementById("huidig").value.replace(',','.'));
  const w = parseFloat(document.getElementById("weging").value.replace(',','.'));
  const d = parseFloat(document.getElementById("doel").value.replace(',','.'));
  if (isNaN(h) || isNaN(w) || isNaN(d)) return;
  const res = (d * (w + 1) - h) / w;
  const box = document.getElementById("resultBox");
  box.style.display = "block";
  document.getElementById("resultaat").innerHTML = `Je moet een <b style="font-size:22px; color:var(--accent);">${res.toFixed(1)}</b> halen!`;
}

/* ================= CORE ================= */
function updateClock(){
  const d=new Date();
  document.getElementById("time").textContent=d.toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"});
  document.getElementById("date").textContent=d.toLocaleDateString("nl-NL",{weekday:"long",day:"numeric",month:"long"});
  const h=d.getHours();
  document.getElementById("groet").textContent = h<12?"Goedemorgen":h<18?"Goedemiddag":"Goedenavond";
}
setInterval(updateClock,1000); updateClock();

const themeBtn = document.getElementById("themeToggle");
const savedTheme = localStorage.getItem("theme") || "light";
document.documentElement.dataset.theme = savedTheme;
themeBtn.textContent = savedTheme === "dark" ? "‚òÄÔ∏è" : "üåô";

themeBtn.onclick = () => {
  const h = document.documentElement;
  const n = h.dataset.theme === "dark" ? "light" : "dark";
  h.dataset.theme = n;
  localStorage.setItem("theme", n);
  themeBtn.textContent = n === "dark" ? "‚òÄÔ∏è" : "üåô";
};

renderToetsen();
</script>
</body>
</html>
